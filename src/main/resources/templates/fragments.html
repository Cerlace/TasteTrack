<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="alert-block(alertType, alertMessage)" class="alert_block">
    <script th:if="${alertType != null || alertMessage != null}">
        function closeAlert(closeButton) {
            const alert = closeButton.parentElement;
            alert.style.opacity = "0";
            setTimeout(function () {
                alert.style.display = "none";
            }, 600);
        }
    </script>
    <div th:if="${alertType == T(cerlace.tastetrack.enums.AlertCode).SUCCESS}" class="alert success">
        <span class="close-button" onclick="closeAlert(this)">&times;</span>
        <strong th:text="#{alert.type.success}"></strong> <span th:text="${alertMessage}"></span>
    </div>
    <div th:if="${alertType == T(cerlace.tastetrack.enums.AlertCode).INFO}" class="alert info">
        <span class="close-button" onclick="closeAlert(this)">&times;</span>
        <strong th:text="#{alert.type.info}">Info message.</strong> <span th:text="${alertMessage}"></span>
    </div>
    <div th:if="${alertType == T(cerlace.tastetrack.enums.AlertCode).WARNING}" class="alert warning">
        <span class="close-button" onclick="closeAlert(this)">&times;</span>
        <strong th:text="#{alert.type.warning}">Warning!</strong> <span th:text="${alertMessage}"></span>
    </div>
    <div th:if="${alertType == T(cerlace.tastetrack.enums.AlertCode).ERROR}" class="alert error">
        <span class="close-button" onclick="closeAlert(this)">&times;</span>
        <strong th:text="#{alert.type.error}">Error!</strong> <span th:text="${alertMessage}"></span>
    </div>
</div>
<div th:fragment="sidebar" class="sidebar">
    <div style="display: flex; flex-direction: column;">
        <form name="list-users"
              method="get"
              th:action="@{/users}">
            <button type="submit"
                    class="menu-button"
            th:text="#{table.user.label}">
            </button>
        </form>
        <form name="list-ingredients"
              method="get"
              th:action="@{/ingredients}">
            <button type="submit"
                    class="menu-button"
                    th:text="#{table.ingredient.label}">
            </button>
        </form>
        <form name="list-dishes"
              method="get"
              th:action="@{/dishes}">
            <button type="submit"
                    class="menu-button"
                    th:text="#{table.dish.label}">
            </button>
        </form>
    </div>
    <div th:replace="~{:: language-switch}"></div>
</div>
<div th:fragment="language-switch" class="lang-switcher">
    <form id="en-lang" th:object="${#locale}" method="get"
          th:action="@{${#request.getRequestURI() + '?' + #request.getQueryString()}}">
        <button type="submit" class="lang-button"
                th:field="*{language}"
                th:value="en"
                th:disabled="${#locale.language == 'en'}">
            <span th:text="#{lang.en}"></span>
        </button>
    </form>
    <form id="ru-lang" th:object="${#locale}" method="get"
          th:action="@{${#request.getRequestURI() + '?' + #request.getQueryString()}}">
        <button type="submit" class="lang-button"
                th:field="*{language}"
                th:value="ru"
                th:disabled="${#locale.language == 'ru'}">
            <span th:text="#{lang.ru}"></span>
        </button>
    </form>
</div>

</body>
</html>